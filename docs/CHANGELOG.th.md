# บันทึกการเปลี่ยนแปลง (Changelog)

> [!NOTE]
> การเปลี่ยนแปลงที่สำคัญทั้งหมดในโปรเจกต์นี้จะถูกบันทึกไว้ในไฟล์นี้
>
> - สำหรับเวอร์ชันภาษาอังกฤษ โปรดดู [English Version](./CHANGELOG.md)

## [3.5.0] - 2025-11-26

### เพิ่มเติม (Added)

- **Documentation**: เพิ่มสารบัญ (Table of Contents) ในหน้าเอกสารสำหรับนักพัฒนา (`/dev/[slug]`) เพื่อการนำทางที่สะดวกขึ้น

### ปรับปรุง (Changed)

- **Dev Portal**: นำตัวเลือกภาษาออกจากหน้าหลักของพอร์ทัลนักพัฒนา (`/dev`) โดยแสดงเอกสารทั้งหมดรวมกัน
- **Documentation**: ปรับปรุงไฟล์เอกสาร (`DEVELOPMENT.md`, `TECH.md`, `DEVELOPMENT.th.md`) โดยลบอีโมจิออกจากหัวข้อและปรับโครงสร้างสารบัญให้ดูสะอาดตาและเป็นมืออาชีพมากขึ้น
- **Documentation**: ปรับปรุงระบบสร้างสารบัญให้รองรับภาษาไทยและ ID ที่กำหนดเองได้อย่างถูกต้อง

## [3.3.0] - 2025-11-25

### เพิ่มเติม (Added)

- **UI/UX**: ปรับปรุงประสบการณ์การดูรูปภาพ
  - เพิ่มระบบคลิกเพื่อดูภาพขนาดเต็มสำหรับ "หลักฐานการรับคืน" ในแดชบอร์ดผู้ดูแลระบบ
  - เพิ่มระบบคลิกเพื่อดูภาพขนาดเต็มสำหรับรูปภาพหัวเรื่องของรายการ ทั้งในมุมมองสาธารณะและผู้ดูแลระบบ
- **Accessibility**: เพิ่ม `DialogTitle` ในมอดูลรูปภาพเพื่อรองรับโปรแกรมอ่านหน้าจอ (Screen Readers)
- **Loading States**: เพิ่มการแสดงสถานะการโหลด (Spinner) และปิดการแก้ไขข้อมูลชั่วคราวในมอดูล "ยืนยันการคืน" (`ClaimItemModal`)

### ปรับปรุง (Changed)

- **Dev Portal**: ตั้งค่าภาษาเริ่มต้นเป็นภาษาไทย (`th`) และเพิ่มการแสดงเอกสาร API ในมุมมองภาษาไทย
- **Documentation**: ปรับรูปแบบข้อความส่วนหัวใน `CHANGELOG` และคู่มือ `DEVELOPMENT` ให้เป็นมาตรฐานเดียวกัน
- **Schema**: เพิ่มนโยบาย `UPDATE` และ `DELETE` สำหรับถังข้อมูล `claim-evidence` เพื่อให้ผู้ดูแลระบบจัดการไฟล์ได้เต็มรูปแบบ

## [3.2.0] - 2025-11-25

### เพิ่มเติม (Added)

- **Localization**: แปลหน้าเข้าสู่ระบบ (`/login`) เป็นภาษาไทย

### ปรับปรุง (Changed)

- **UX/Loading**: ปรับปรุงการทำงานของปุ่ม "รีเฟรช" ในแดชบอร์ดผู้ดูแลระบบ ให้เป็นการโหลดข้อมูลเบื้องหลังพร้อมแสดงสถานะที่ตาราง แทนการโหลดหน้าใหม่ทั้งหมด

## [3.1.0] - 2025-11-25

### เพิ่มเติม (Added)

- **Admin Tools**: เพิ่มเครื่องมือสำหรับผู้ดูแลระบบ
  - **Purge**: ฟังก์ชันล้างข้อมูลเก่า (ลบรายการที่ "พบแล้ว" และเก่ากว่า 90 วัน) เพื่อจัดการฐานข้อมูล
  - **Refresh**: ปุ่มรีเฟรชข้อมูลในตารางโดยไม่ต้องโหลดหน้าใหม่
- **UI**: เพิ่มปุ่ม Refresh และ Purge ในส่วนหัวของตาราง Admin

## [3.0.0] - 2025-11-25

### เพิ่มเติม (Added)

- **Claimer Info Log**: ระบบบันทึกข้อมูลผู้รับคืนอย่างละเอียด
  - เพิ่มฟิลด์ "ช่องทางติดต่อโซเชียลมีเดีย" และ "หลักฐานการรับคืน (รูปภาพ)" ในขั้นตอนการคืนของ
  - แสดงข้อมูลผู้รับคืนพร้อมรูปภาพหลักฐานในรายละเอียดรายการที่คืนแล้ว
- **Database**: เพิ่มตาราง `claims` และ Storage Bucket `claim-evidence` สำหรับเก็บข้อมูลการรับคืน
- **API**: อัปเดต API `items` ให้รองรับการบันทึกและดึงข้อมูลการรับคืน (Claims)

### ปรับปรุง (Changed)

- **Admin UI**: ปรับปรุง `ClaimItemModal` และ `ClaimerInfoCard` ให้รองรับข้อมูลใหม่

## [2.3.1] - 2025-11-25

### เพิ่มเติม (Added)

- **Admin Header**: เมนู Dropdown แบบตอบสนองบนมือถือพร้อม Overlay เต็มหน้าจอเพื่อการใช้งานที่สะดวกขึ้นบนหน้าจอขนาดเล็ก
- **Logout**: เพิ่มหน้าจอโหลด (Loading Screen) ระหว่างออกจากระบบเพื่อตอบสนองผู้ใช้งานได้ดียิ่งขึ้น

### ปรับปรุง (Changed)

- **UI/UX**: อัปเดตธีมสีหลักจาก เขียว/เขียวอมฟ้า (Teal) เป็น น้ำเงิน/คราม (Indigo) เพื่อความสวยงามและเป็นมืออาชีพมากขึ้น
  - อัปเดตส่วนหัว Admin, ส่วนหัวสาธารณะ, ป้ายสถานะ, และตัวชี้วัดบนแดชบอร์ด

### ปรับปรุงโครงสร้าง (Refactoring)

- **Cleanup**: ลบไฟล์ซ้ำซ้อน `ItemStatusBadge 2.jsx`
- **Organization**: ย้าย `ItemStatusBadge.jsx` จาก `src/components/shared` ไปยัง `src/components/items` และลบโฟลเดอร์ `shared` ที่ว่างเปล่า

### แก้ไข (Fixed)

- **Mobile Menu**: แก้ไขปัญหาการซ้อนทับ (Stacking Context) และการล้น (Overflow) ที่ทำให้กดเมนูบนมือถือไม่ได้
- **Logout**: แก้ไขข้อผิดพลาด Runtime Error ("undefined is not an object") เมื่อออกจากระบบผ่านเมนูมือถือ

## [2.3.0] - 2025-11-25

### เพิ่มเติม (Added)

- **Developer Portal**: เพิ่มหน้า `/dev` สำหรับรวมเอกสารและเครื่องมือสำหรับนักพัฒนา
- **Sitemap Viewer**: แปลงเครื่องมือดู Sitemap เป็น Next.js Page (`/dev/sitemap-viewer`)
- **Documentation**: เพิ่มเอกสาร `TECH.md` อธิบาย Tech Stack และ Architecture อย่างละเอียด
- **Analytics**: ติดตั้ง `@vercel/analytics` เพื่อติดตามการใช้งาน
- **Navigation**: เพิ่มลิงก์ "สำหรับนักพัฒนา" ใน Footer และ Admin Header

### ปรับปรุง (Changed)

- **Favicon**: อัปเกรดจาก `icon.png` เป็น `favicon.ico` มาตรฐาน
- **Docs**: ปรับปรุง `README.md` และ `DEVELOPMENT.th.md` ให้สะท้อนโครงสร้างโปรเจกต์ล่าสุด
- **Table of Contents**: แก้ไขลิงก์ในสารบัญของเอกสารต่างๆ ให้ทำงานถูกต้อง

### ลบ (Removed)

- **Legacy Files**: ลบไฟล์ `docs/sitemap-viewer.html` และ `src/app/icon.png` ที่ไม่ได้ใช้งานแล้ว

## [2.1.1] - 2025-11-24

### เปลี่ยนแปลง (Changed)

- **Image Optimization**: ปรับปรุงตัวแปลงรูปภาพเพื่อให้แน่ใจว่ามีการแปลงเป็น WebP อย่างมีประสิทธิภาพก่อนอัปโหลด

### แก้ไข (Fixed)

- **Double Upload**: แก้ไขข้อผิดพลาดที่รูปภาพถูกอัปโหลดสองครั้ง (ต้นฉบับและ WebP) ตอนนี้จะเก็บเฉพาะเวอร์ชัน WebP ที่ปรับปรุงแล้วเท่านั้น
- **Dev Server Locks**: แก้ไขปัญหา "Unable to acquire lock" ที่เกิดขึ้นซ้ำๆ ซึ่งป้องกันไม่ให้เซิร์ฟเวอร์เริ่มทำงาน
- **Accessibility**: เพิ่มส่วนประกอบ `DialogDescription` ที่ขาดหายไปใน `AddItemModal`, `ItemModal`, `AdminItemModal`, และ `ClaimItemModal` เพื่อแก้ไขคำเตือนการเข้าถึง (Accessibility)
- **Source Maps**: แก้ไขคำเตือน source map ที่เกี่ยวข้องกับ Preline UI ในคอนโซลการพัฒนา

## [2.1.0] - 2025-11-23

### เพิ่มเติม (Added)

- **Deferred Image Upload**: รูปภาพจะแสดงตัวอย่างในเครื่องโดยใช้ Object URLs และจะถูกอัปโหลดไปยัง Supabase เมื่อผู้ใช้ยืนยันการเพิ่มเท่านั้น
- **Instant Preview**: แสดงตัวอย่างทันทีเมื่อเลือกไฟล์รูปภาพในขั้นตอนการเพิ่มรายการ
- **Dev Script**: เพิ่มคำสั่ง `npm run dev:clean` เพื่อปิด zombie processes และลบไฟล์ lock ของ Next.js ที่ค้างอยู่โดยอัตโนมัติ
- **Loading States**: เพิ่มการแสดงสถานะการโหลด (spinners) ในระหว่างขั้นตอนการอัปโหลดและเผยแพร่

### เปลี่ยนแปลง (Changed)

- **Admin Dashboard**: ปรับปรุงการออกแบบสำหรับอุปกรณ์มือถือ โดยเปลี่ยนเป็นมุมมองแบบการ์ดเพื่อการใช้งานที่ดีขึ้น
- **Documentation**: อัปเดต `README.md` และ `docs/DEVELOPMENT.th.md` เพื่อสะท้อนถึงขั้นตอนการจัดการรูปภาพใหม่และสคริปต์สำหรับการพัฒนา

## [2.0.0] - 2025-11-22

### เพิ่มเติม (Added)

- **Project Restructure**: ปรับโครงสร้างโค้ดครั้งใหญ่เพื่อรองรับการขยายตัวในอนาคต
- **Documentation**: อัปเดตคู่มือการพัฒนาและเอกสาร API อย่างครอบคลุม

## [1.0.0] - 2025-11-20

### เพิ่มเติม (Added)

- **Public Gallery**: หน้าแรกสาธารณะแสดงตารางรายการของหายพร้อมระบบค้นหาและกรอง
- **Admin Dashboard**: เส้นทางที่ได้รับการป้องกันสำหรับผู้ดูแลระบบเพื่อจัดการสินค้าคงคลัง (เพิ่ม, แก้ไข, ลบ, คืน)
- **Authentication**: ระบบล็อกอินที่ปลอดภัยโดยใช้ Supabase Auth
- **Item Management**: การจัดการรายการของหายแบบ CRUD เต็มรูปแบบ
- **Image Upload**: การเชื่อมต่อกับ Supabase Storage สำหรับรูปภาพสินค้า
- **Responsive UI**: อินเทอร์เฟซที่ทันสมัยและตอบสนองได้ดี สร้างด้วย Tailwind CSS และ Shadcn UI
- **Supabase Integration**: คลาส `DataManager` สำหรับจัดการการเชื่อมต่อฐานข้อมูล
