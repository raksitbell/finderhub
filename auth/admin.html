<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin Dashboard - FinderHub</title>
    <link rel="stylesheet" href="../assets/css/main.css" />
    <link rel="stylesheet" href="../assets/css/components.css" />
    <link rel="stylesheet" href="../assets/css/responsive.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <!-- FontAwesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
  </head>
  <body>
    <!-- Navbar -->
    <nav class="navbar">
      <div class="container nav-container">
        <a href="admin.html" class="nav-brand">
          <span><i class="fas fa-shield-alt"></i> FinderHub Admin</span>
        </a>
        <div class="nav-links">
          <a href="../index.html" class="nav-link">Back to Home</a>
          <span class="nav-link">Welcome, Admin</span>
          <a
            href="#"
            id="logoutBtn"
            class="nav-link"
            style="color: var(--danger-color)"
            >Logout</a
          >
        </div>
      </div>
    </nav>

    <!-- Main Content -->
    <main class="container mt-lg">
      <div class="flex justify-between items-center mb-md">
        <h1 style="font-size: 1.75rem; font-weight: 700">Dashboard</h1>
        <button id="openAddItemModalBtn" class="btn btn-primary">
          + Add New Item
        </button>
      </div>

      <!-- Stats Cards -->
      <div class="grid grid-cols-3 mb-md">
        <div class="card p-md text-center">
          <h3 class="text-secondary text-sm uppercase font-bold mb-xs">
            Total Items
          </h3>
          <p id="totalItems" class="text-3xl font-bold text-primary">0</p>
        </div>
        <div class="card p-md text-center">
          <h3 class="text-secondary text-sm uppercase font-bold mb-xs">
            Found
          </h3>
          <p id="foundItems" class="text-3xl font-bold text-success">0</p>
        </div>
        <div class="card p-md text-center">
          <h3 class="text-secondary text-sm uppercase font-bold mb-xs">
            Returned
          </h3>
          <p id="returnedItems" class="text-3xl font-bold text-secondary">0</p>
        </div>
      </div>

      <!-- Items Table -->
      <div class="table-container">
        <table class="table">
          <thead>
            <tr>
              <th>Image</th>
              <th>Item Name</th>
              <th>Category</th>
              <th>Location</th>
              <th>Date</th>
              <th>Status</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="adminItemsTable">
            <!-- Rows injected by JS -->
          </tbody>
        </table>
      </div>
    </main>

    <!-- ==========================================
         Footer
    ========================================== -->
    <footer class="footer">
      <div class="container">
        <p>&copy; 2023 FinderHub. All rights reserved.</p>
        <p style="margin-top: 0.5rem; font-size: 0.875rem">
          <a
            href="#"
            id="resetDataBtn"
            style="color: var(--danger-color); text-decoration: underline"
            >Reset Data to Default</a
          >
        </p>
      </div>
    </footer>

    <!-- Add Item Modal -->
    <div id="addItemModal" class="modal hidden">
      <div class="modal-content">
        <span class="close-modal">&times;</span>
        <h2 class="text-center mb-lg">Add New Item</h2>
        <form id="addItemForm">
          <div class="form-group">
            <label for="itemName" class="form-label">Item Name</label>
            <input type="text" id="itemName" class="form-control" required />
          </div>

          <div class="grid grid-cols-2 gap-md">
            <div class="form-group">
              <label for="category" class="form-label">Category</label>
              <select id="category" class="form-control" required>
                <option value="โทรศัพท์ / ไอที">
                  Electronics (โทรศัพท์ / ไอที)
                </option>
                <option value="ของใช้ส่วนตัว">Personal (ของใช้ส่วนตัว)</option>
                <option value="หนังสือ / เครื่องเขียน">
                  Stationery (หนังสือ / เครื่องเขียน)
                </option>
                <option value="อื่นๆ">Others (อื่นๆ)</option>
              </select>
            </div>
            <div class="form-group">
              <label for="dateFound" class="form-label"
                >Date & Time Found</label
              >
              <input
                type="datetime-local"
                id="dateFound"
                class="form-control"
                required
              />
            </div>
          </div>

          <div class="form-group">
            <label for="location" class="form-label">Location Found</label>
            <input type="text" id="location" class="form-control" required />
          </div>

          <div class="form-group">
            <label for="imageUpload" class="form-label">Item Image</label>
            <input
              type="file"
              id="imageUpload"
              class="form-control"
              accept="image/*"
            />
            <small class="text-secondary"
              >Upload an image (will be saved locally)</small
            >
          </div>

          <div class="form-group">
            <label for="description" class="form-label">Description</label>
            <textarea
              id="description"
              class="form-control"
              rows="4"
              required
            ></textarea>
          </div>

          <div class="form-group">
            <label for="contact" class="form-label"
              >Contact Point (Where to claim)</label
            >
            <input
              type="text"
              id="contact"
              class="form-control"
              value="Security Office"
              required
            />
          </div>

          <button type="submit" class="btn btn-primary btn-block">
            Add Item
          </button>
        </form>
      </div>
    </div>

    <!-- Claim Item Modal -->
    <div id="claimItemModal" class="modal hidden">
      <div class="modal-content">
        <span class="close-modal" id="closeClaimModal">&times;</span>
        <h2 class="text-center mb-lg">Item Claim Details</h2>
        <form id="claimItemForm">
          <div class="form-group">
            <label for="claimerName" class="form-label">Claimer Name</label>
            <input
              type="text"
              id="claimerName"
              class="form-control"
              placeholder="Enter full name"
              required
            />
          </div>
          <div class="form-group">
            <label for="claimerPhone" class="form-label">Phone Number</label>
            <input
              type="tel"
              id="claimerPhone"
              class="form-control"
              placeholder="Enter phone number"
              required
            />
          </div>
          <div class="flex gap-md mt-lg">
            <button
              type="button"
              class="btn btn-secondary flex-1"
              id="cancelClaimBtn"
            >
              Cancel
            </button>
            <button type="submit" class="btn btn-primary flex-1">
              Confirm Return
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- View Item Modal -->
    <div id="viewItemModal" class="modal hidden">
      <div class="modal-content">
        <span class="close-modal" id="closeViewModal">&times;</span>

        <!-- Image -->
        <img
          id="viewItemImage"
          src=""
          alt="Item Image"
          class="card-image"
          style="height: 300px; margin-bottom: 1rem; object-fit: cover"
        />

        <!-- Header -->
        <div class="flex justify-between items-center mb-md">
          <h2
            id="viewItemName"
            style="font-size: 1.5rem; font-weight: 700"
          ></h2>
          <span id="viewItemStatusBadge" class="card-badge"></span>
        </div>

        <!-- Details Grid -->
        <div class="grid grid-cols-2 gap-md mb-md">
          <div>
            <p class="text-secondary">Category</p>
            <p id="viewItemCategory" class="font-semibold"></p>
          </div>
          <div>
            <p class="text-secondary">Date Found</p>
            <p id="viewItemDate" class="font-semibold"></p>
          </div>
          <div>
            <p class="text-secondary">Location Found</p>
            <p id="viewItemLocation" class="font-semibold"></p>
          </div>
          <div>
            <p class="text-secondary">Contact Point</p>
            <p id="viewItemContact" class="font-semibold"></p>
          </div>
        </div>

        <!-- Description -->
        <div class="mb-lg">
          <p class="text-secondary mb-sm">Description</p>
          <p id="viewItemDescription"></p>
        </div>

        <!-- Claimer Details (Hidden by default) -->
        <div
          id="viewItemClaimerSection"
          class="hidden border-t pt-md mt-md mb-md"
        >
          <h3 class="text-md font-bold mb-sm">Claimer Information</h3>
          <div class="grid grid-cols-2 gap-md">
            <div>
              <p class="text-secondary">Name</p>
              <p id="viewItemClaimerName" class="font-semibold"></p>
            </div>
            <div>
              <p class="text-secondary">Phone</p>
              <p id="viewItemClaimerPhone" class="font-semibold"></p>
            </div>
          </div>
        </div>

        <!-- Close Button -->
        <div class="text-center mt-md">
          <button
            class="btn btn-secondary close-view-btn"
            style="min-width: 120px"
          >
            Close
          </button>
        </div>
      </div>
    </div>

    <script type="module" src="../assets/js/admin.js"></script>
  </body>
</html>
